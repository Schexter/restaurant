<!DOCTYPE html>
<html lang="de">
<head>
    <!-- Erstellt von Hans Hahn - Alle Rechte vorbehalten -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Reservieren Sie Ihren Tisch im Restaurant Goldener Löffel - Einfach, schnell und unkompliziert online">
    <meta name="keywords" content="Reservierung, Tisch buchen, Restaurant, Online-Reservierung">
    <meta name="author" content="Hans Hahn">
    
    <title>Tischreservierung - Restaurant Goldener Löffel</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../images/logo.svg">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS-Dateien -->
    <link rel="stylesheet" href="../css/global-layout.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/responsive.css">
</head>
<body>
    <!-- EINHEITLICHER HEADER -->
    <header class="global-header">
        <div class="header-container">
            <a href="index.html" class="header-logo">
                <img src="../images/logo.svg" alt="Restaurant Goldener Löffel Logo">
                <div class="header-logo-text">
                    <span class="header-logo-title">Goldener Löffel</span>
                    <span class="header-logo-subtitle">Exklusive Kulinarik seit 1995</span>
                </div>
            </a>
            
            <nav class="header-nav">
                <button class="mobile-menu-btn" aria-label="Menü öffnen">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="header-menu">
                    <li><a href="index.html">Start</a></li>
                    <li><a href="speisekarte.html">Speisekarte</a></li>
                    <li><a href="chefkoechin.html">Chefköchin</a></li>
                    <li><a href="signature-kollektionen.html">Signature</a></li>
                    <li><a href="reservierung.html" class="active">Reservierung</a></li>
                    <li><a href="rezepte.html">Rezepte</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="reservation-hero">
        <div class="container">
            <h2 class="section__title">Tischreservierung</h2>
            <p class="section__subtitle">Sichern Sie sich Ihren Platz für ein unvergessliches kulinarisches Erlebnis</p>
        </div>
    </section>

    <!-- Reservation Section -->
    <section class="reservation-section">
        <div class="container">
            <div class="reservation-grid">
                <!-- Reservation Form -->
                <div class="reservation-form-wrapper">
                    <form class="form reservation-form" id="reservationForm" novalidate>
                        <h3 class="form__title">Online-Reservierung</h3>
                        
                        <!-- Success Message (initially hidden) -->
                        <div class="alert alert--success" id="successMessage" style="display: none;">
                            <h4 class="alert__title">Vielen Dank für Ihre Anfrage!</h4>
                            <p class="alert__text">Wir bestätigen Ihre Reservierung in Kürze per E-Mail.</p>
                        </div>

                        <!-- Error Message (initially hidden) -->
                        <div class="alert alert--error" id="errorMessage" style="display: none;">
                            <h4 class="alert__title">Bitte überprüfen Sie Ihre Eingaben</h4>
                            <p class="alert__text">Alle Pflichtfelder müssen ausgefüllt werden.</p>
                        </div>
                        
                        <div class="form__row">
                            <div class="form__group">
                                <label for="firstName" class="form__label">Vorname *</label>
                                <input type="text" id="firstName" name="firstName" class="form__input" required placeholder="Max">
                                <span class="form__error" id="firstNameError"></span>
                            </div>
                            
                            <div class="form__group">
                                <label for="lastName" class="form__label">Nachname *</label>
                                <input type="text" id="lastName" name="lastName" class="form__input" required placeholder="Mustermann">
                                <span class="form__error" id="lastNameError"></span>
                            </div>
                        </div>
                        
                        <div class="form__row">
                            <div class="form__group">
                                <label for="email" class="form__label">E-Mail *</label>
                                <input type="email" id="email" name="email" class="form__input" required placeholder="max.mustermann@beispiel.de">
                                <span class="form__error" id="emailError"></span>
                            </div>
                            
                            <div class="form__group">
                                <label for="phone" class="form__label">Telefonnummer *</label>
                                <input type="tel" id="phone" name="phone" class="form__input" required placeholder="0123 456789">
                                <span class="form__error" id="phoneError"></span>
                            </div>
                        </div>
                        
                        <div class="form__row">
                            <div class="form__group">
                                <label for="date" class="form__label">Datum *</label>
                                <input type="date" id="date" name="date" class="form__input" required min="">
                                <span class="form__error" id="dateError"></span>
                            </div>
                            
                            <div class="form__group">
                                <label for="time" class="form__label">Uhrzeit *</label>
                                <select id="time" name="time" class="form__select" required>
                                    <option value="">Bitte wählen</option>
                                    <option value="18:00">18:00 Uhr</option>
                                    <option value="18:30">18:30 Uhr</option>
                                    <option value="19:00">19:00 Uhr</option>
                                    <option value="19:30">19:30 Uhr</option>
                                    <option value="20:00">20:00 Uhr</option>
                                    <option value="20:30">20:30 Uhr</option>
                                    <option value="21:00">21:00 Uhr</option>
                                    <option value="21:30">21:30 Uhr</option>
                                </select>
                                <span class="form__error" id="timeError"></span>
                            </div>
                        </div>
                        
                        <div class="form__row">
                            <div class="form__group">
                                <label for="persons" class="form__label">Anzahl Personen *</label>
                                <select id="persons" name="persons" class="form__select" required>
                                    <option value="">Bitte wählen</option>
                                    <option value="1">1 Person</option>
                                    <option value="2">2 Personen</option>
                                    <option value="3">3 Personen</option>
                                    <option value="4">4 Personen</option>
                                    <option value="5">5 Personen</option>
                                    <option value="6">6 Personen</option>
                                    <option value="7">7 Personen</option>
                                    <option value="8">8 Personen</option>
                                    <option value="9+">Mehr als 8 Personen</option>
                                </select>
                                <span class="form__error" id="personsError"></span>
                            </div>
                            
                            <div class="form__group">
                                <label for="occasion" class="form__label">Anlass (optional)</label>
                                <select id="occasion" name="occasion" class="form__select">
                                    <option value="">Kein besonderer Anlass</option>
                                    <option value="birthday">Geburtstag</option>
                                    <option value="anniversary">Jubiläum</option>
                                    <option value="business">Geschäftsessen</option>
                                    <option value="date">Romantisches Dinner</option>
                                    <option value="celebration">Feier</option>
                                    <option value="other">Sonstiges</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form__group">
                            <label for="specialRequests" class="form__label">Besondere Wünsche</label>
                            <textarea id="specialRequests" name="specialRequests" class="form__textarea" 
                                      placeholder="Allergien, Unverträglichkeiten, Kinderstuhl benötigt, etc."></textarea>
                            <span class="form__help">Teilen Sie uns gerne Ihre speziellen Anforderungen mit</span>
                        </div>
                        
                        <div class="form__group">
                            <div class="form__checkbox-wrapper">
                                <input type="checkbox" id="newsletter" name="newsletter" class="form__checkbox">
                                <label for="newsletter">Ich möchte über Neuigkeiten und Angebote informiert werden</label>
                            </div>
                        </div>
                        
                        <div class="form__group">
                            <div class="form__checkbox-wrapper">
                                <input type="checkbox" id="privacy" name="privacy" class="form__checkbox" required>
                                <label for="privacy">Ich habe die Datenschutzerklärung gelesen und akzeptiert *</label>
                            </div>
                            <span class="form__error" id="privacyError"></span>
                        </div>
                        
                        <div class="form__actions">
                            <button type="submit" class="btn btn--primary btn--large">Reservierung anfragen</button>
                            <button type="reset" class="btn btn--outline">Formular zurücksetzen</button>
                        </div>
                        
                        <p class="form__note">* Pflichtfelder</p>
                    </form>
                </div>

                <!-- Checkout Confirmation Section (MOVED OUTSIDE FORM WRAPPER) -->
                <div class="checkout-section" id="checkoutSection" style="display: none;">
                    <div class="checkout-header">
                        <div class="checkout-icon">✨</div>
                        <h2 class="checkout-title">Vielen Dank für Ihre Reservierung!</h2>
                        <div class="checkout-personal-message">
                            <p class="checkout-greeting" id="checkoutGreeting" style="font-size: 1.1rem; color: #333; margin-bottom: 10px;">Hallo [Vorname] [Nachname], vielen Dank für Ihre Reservierung!</p>
                            <p class="checkout-confirmation" id="checkoutConfirmation" style="font-size: 1rem; color: #555; margin-bottom: 10px;">Wir freuen uns sehr diese bestätigen zu können und Sie bei uns am [Datum] um [Uhrzeit] begrüßen zu können!</p>
                            <p class="checkout-table-info" id="checkoutTableInfo" style="font-size: 1rem; color: #555; margin-bottom: 10px;">Wir haben Ihnen den Tisch [Nummer] für [Personen] zugewiesen.</p>
                            <p class="checkout-closing" id="checkoutClosing" style="font-size: 1rem; color: #555; margin-bottom: 10px;">Wir wünschen Ihnen einen angenehmen Aufenthalt bei uns und freuen uns Sie kulinarisch verwöhnen zu können.</p>
                        </div>
                    </div>

                    <div class="checkout-content">
                        <div class="checkout-grid">
                            <div class="checkout-summary">
                                <h3 class="checkout-section-title">📋 Ihre Reservierung im Überblick</h3>
                                <div class="summary-card">
                                    <div class="summary-row">
                                        <span class="summary-label">👤 Name:</span>
                                        <span class="summary-value" id="summaryName"></span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">📧 E-Mail:</span>
                                        <span class="summary-value" id="summaryEmail"></span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">📞 Telefon:</span>
                                        <span class="summary-value" id="summaryPhone"></span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">📅 Datum:</span>
                                        <span class="summary-value" id="summaryDate"></span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">🕐 Uhrzeit:</span>
                                        <span class="summary-value" id="summaryTime"></span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">👥 Personen:</span>
                                        <span class="summary-value" id="summaryPersons"></span>
                                    </div>
                                    <div class="summary-row" id="summaryOccasionRow" style="display: none;">
                                        <span class="summary-label">🎉 Anlass:</span>
                                        <span class="summary-value" id="summaryOccasion"></span>
                                    </div>
                                    <div class="summary-row" id="summaryRequestsRow" style="display: none;">
                                        <span class="summary-label">💭 Besondere Wünsche:</span>
                                        <span class="summary-value" id="summaryRequests"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="checkout-table">
                                <h3 class="checkout-section-title">🍽️ Ihr reservierter Tisch</h3>
                                <div class="table-card">
                                    <div class="table-visual">
                                        <div class="table-number" id="tableNumber">Tisch 10</div>
                                        <div class="table-location" id="tableLocation">am Fenster</div>
                                    </div>
                                    <div class="table-features">
                                        <h4>Besonderheiten Ihres Tisches:</h4>
                                        <ul id="tableFeatures">
                                            <li>Wunderschöner Ausblick in den Garten</li>
                                            <li>Ruhige Atmosphäre</li>
                                            <li>Perfekt für romantische Abende</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="checkout-next-steps">
                            <h3 class="checkout-section-title">📧 Wie geht es weiter?</h3>
                            <div class="steps-grid">
                                <div class="step">
                                    <div class="step-number">1</div>
                                    <div class="step-content">
                                        <h4>Bestätigung per E-Mail</h4>
                                        <p>Sie erhalten in wenigen Minuten eine detaillierte Bestätigung an <strong id="confirmEmail">ihre E-Mail</strong></p>
                                    </div>
                                </div>
                                <div class="step">
                                    <div class="step-number">2</div>
                                    <div class="step-content">
                                        <h4>Vorbereitung</h4>
                                        <p>Unser Küchenchef bereitet bereits Ihre kulinarischen Köstlichkeiten vor</p>
                                    </div>
                                </div>
                                <div class="step">
                                    <div class="step-number">3</div>
                                    <div class="step-content">
                                        <h4>Ihr Besuch</h4>
                                        <p>Bitte seien Sie 10 Minuten vor Ihrer Reservierung da - wir freuen uns auf Sie!</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="checkout-actions">
                            <button type="button" class="btn btn--primary btn--large" onclick="window.print()">
                                📄 Bestätigung drucken
                            </button>
                            <button type="button" class="btn btn--outline" id="newReservationBtn">
                                ➕ Neue Reservierung
                            </button>
                            <a href="../index.html" class="btn btn--secondary">
                                🏠 Zur Startseite
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Information Sidebar -->
                <div class="reservation-info">
                    <div class="info-card">
                        <h3 class="info-card__title">Öffnungszeiten</h3>
                        <dl class="info-card__list">
                            <dt>Dienstag - Samstag</dt>
                            <dd>18:00 - 23:00 Uhr</dd>
                            <dt>Sonntag & Montag</dt>
                            <dd>Ruhetag</dd>
                        </dl>
                    </div>
                    
                    <div class="info-card">
                        <h3 class="info-card__title">Kontakt</h3>
                        <p class="info-card__text">
                            <strong>Telefonische Reservierung:</strong><br>
                            <a href="tel:+4912345678900" class="info-card__phone">0123 456 789 00</a>
                        </p>
                        <p class="info-card__text">
                            <strong>E-Mail:</strong><br>
                            <a href="mailto:reservierung@goldener-loeffel.de">reservierung@goldener-loeffel.de</a>
                        </p>
                    </div>
                    
                    <div class="info-card">
                        <h3 class="info-card__title">Wichtige Hinweise</h3>
                        <ul class="info-card__bullets">
                            <li>Reservierungen sind bis zu 3 Monate im Voraus möglich</li>
                            <li>Für Gruppen ab 9 Personen kontaktieren Sie uns bitte telefonisch</li>
                            <li>Stornierungen sind bis 24 Stunden vorher kostenfrei möglich</li>
                            <li>Bei Verspätungen über 15 Minuten verfällt die Reservierung</li>
                            <li>Dresscode: Smart Casual</li>
                        </ul>
                    </div>
                    
                    <div class="info-card info-card--special">
                        <h3 class="info-card__title">Private Events</h3>
                        <p class="info-card__text">
                            Planen Sie eine größere Feier oder ein Event? 
                            Unser Restaurant bietet auch exklusive Vermietungen 
                            für bis zu 80 Personen.
                        </p>
                        <a href="index.html#catering-pakete" class="btn btn--secondary">Event-Catering anfragen</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section class="location-section">
        <div class="container">
            <h2 class="section__title">So finden Sie uns</h2>
            <div class="location-grid">
                <div class="location-map">
                    <!-- Placeholder für Karte -->
                    <div class="map-placeholder">
                        <p>🗺️ Interaktive Karte</p>
                        <p>Gourmetstraße 42<br>12345 Feinschmeckerhausen</p>
                    </div>
                </div>
                <div class="location-info">
                    <h3>Anfahrt</h3>
                    <div class="transport-option">
                        <h4>🚗 Mit dem Auto</h4>
                        <p>Kostenlose Parkplätze direkt vor dem Restaurant. 
                           Valet-Parking-Service verfügbar.</p>
                    </div>
                    <div class="transport-option">
                        <h4>🚊 Öffentliche Verkehrsmittel</h4>
                        <p>U-Bahn: Linie U3, Station "Gourmetplatz" (5 Min. Fußweg)<br>
                           Bus: Linien 42, 88, Haltestelle "Feinschmecker Allee"</p>
                    </div>
                    <div class="transport-option">
                        <h4>🚕 Taxi</h4>
                        <p>Gerne arrangieren wir für Sie ein Taxi nach Ihrem Besuch.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- EINHEITLICHER FOOTER -->
    <footer class="global-footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h3>Restaurant Goldener Löffel</h3>
                    <p>
                        Exklusive Kulinarik und Event-Catering auf höchstem Niveau. 
                        Seit 1995 Ihr Partner für unvergessliche Gaumenfreuden.
                    </p>
                    <div class="footer-social">
                        <a href="#" aria-label="Facebook">📘</a>
                        <a href="#" aria-label="Instagram">📷</a>
                        <a href="#" aria-label="Twitter">🐦</a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h4>Kontakt</h4>
                    <address>
                        Gourmetstraße 42<br>
                        12345 Feinschmeckerhausen<br>
                        Tel: <a href="tel:+4912345678900">0123 456 789 00</a><br>
                        E-Mail: <a href="mailto:info@goldener-loeffel.de">info@goldener-loeffel.de</a>
                    </address>
                </div>
                
                <div class="footer-column">
                    <h4>Öffnungszeiten</h4>
                    <p>
                        <strong>Dienstag - Samstag:</strong><br>
                        18:00 - 23:00 Uhr<br><br>
                        <strong>Sonntag & Montag:</strong><br>
                        Ruhetag
                    </p>
                </div>
                
                <div class="footer-column">
                    <h4>Schnelllinks</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li><a href="speisekarte.html">Speisekarte</a></li>
                        <li><a href="signature-kollektionen.html">Signature Gerichte</a></li>
                        <li><a href="reservierung.html">Tisch reservieren</a></li>
                        <li><a href="index.html#catering-pakete">Event-Catering</a></li>
                    </ul>
                </div>
                
                <div class="footer-column footer-legal">
                    <h4>Rechtliches</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li><a href="impressum.html" style="color: #D4AF37;">Impressum</a></li>
                        <li><a href="agb.html" style="color: #D4AF37;">AGB</a></li>
                        <li><a href="datenschutz.html" style="color: #D4AF37;">Datenschutz</a></li>
                        <li><a href="reservierung.html" style="color: #D4AF37;">Reservierung</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-divider"></div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Restaurant Goldener Löffel. Erstellt von Hans Hahn - Alle Rechte vorbehalten.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile Menu Toggle & Reservation System mit verbessertem Checkout
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const headerMenu = document.querySelector('.header-menu');
            
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', function() {
                    this.classList.toggle('active');
                    headerMenu.classList.toggle('active');
                });
            }
            
            // Show/hide form based on checkout state
            function showReservationForm() {
                const formWrapper = document.querySelector('.reservation-form-wrapper');
                const checkoutSection = document.getElementById('checkoutSection');
                
                if (formWrapper) {
                    formWrapper.style.display = 'block';
                }
                if (checkoutSection) {
                    checkoutSection.style.display = 'none';
                }
            }
            
            // Schließe Menü beim Klick außerhalb
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.header-nav')) {
                    mobileMenuBtn?.classList.remove('active');
                    headerMenu?.classList.remove('active');
                }
            });
            
            // Formular-Validierung
            // Setze minimales Datum auf heute
            const dateInput = document.getElementById('date');
            const today = new Date().toISOString().split('T')[0];
            dateInput.min = today;
            
            const form = document.getElementById('reservationForm');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Reset error messages
                errorMessage.style.display = 'none';
                document.querySelectorAll('.form__error').forEach(error => error.textContent = '');
                
                let isValid = true;
                
                // Validate required fields
                const requiredFields = [
                    { id: 'firstName', error: 'firstNameError', message: 'Bitte geben Sie Ihren Vornamen ein' },
                    { id: 'lastName', error: 'lastNameError', message: 'Bitte geben Sie Ihren Nachnamen ein' },
                    { id: 'email', error: 'emailError', message: 'Bitte geben Sie eine gültige E-Mail-Adresse ein' },
                    { id: 'phone', error: 'phoneError', message: 'Bitte geben Sie Ihre Telefonnummer ein' },
                    { id: 'date', error: 'dateError', message: 'Bitte wählen Sie ein Datum' },
                    { id: 'time', error: 'timeError', message: 'Bitte wählen Sie eine Uhrzeit' },
                    { id: 'persons', error: 'personsError', message: 'Bitte wählen Sie die Anzahl der Personen' }
                ];
                
                requiredFields.forEach(field => {
                    const input = document.getElementById(field.id);
                    if (!input.value) {
                        document.getElementById(field.error).textContent = field.message;
                        isValid = false;
                    }
                });
                
                // Validate email format
                const email = document.getElementById('email');
                if (email.value && !email.value.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) {
                    document.getElementById('emailError').textContent = 'Bitte geben Sie eine gültige E-Mail-Adresse ein';
                    isValid = false;
                }
                
                // Validate privacy checkbox
                if (!document.getElementById('privacy').checked) {
                    document.getElementById('privacyError').textContent = 'Bitte akzeptieren Sie die Datenschutzerklärung';
                    isValid = false;
                }
                
                // If valid, show checkout confirmation
                if (isValid) {
                    showCheckoutConfirmation();
                } else {
                    errorMessage.style.display = 'block';
                    errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            });
            
            // Reset form
            form.addEventListener('reset', function() {
                successMessage.style.display = 'none';
                errorMessage.style.display = 'none';
                document.getElementById('checkoutSection').style.display = 'none';
                document.querySelectorAll('.form__error').forEach(error => error.textContent = '');
            });

            // New reservation button
            document.getElementById('newReservationBtn').addEventListener('click', function() {
                showReservationForm();
                form.reset();
                dateInput.min = today;
                form.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });

            // Function to show checkout confirmation
            function showCheckoutConfirmation() {
                console.log('Checkout function called'); // Debug
                
                // Hide the entire form wrapper
                const formWrapper = document.querySelector('.reservation-form-wrapper');
                if (formWrapper) {
                    formWrapper.style.display = 'none';
                    console.log('Form wrapper hidden'); // Debug
                }
                
                // Show checkout section
                const checkoutSection = document.getElementById('checkoutSection');
                if (checkoutSection) {
                    checkoutSection.style.display = 'block';
                    console.log('Checkout section shown'); // Debug
                }

                // Get form data
                const firstName = document.getElementById('firstName').value;
                const lastName = document.getElementById('lastName').value;
                const email = document.getElementById('email').value;
                const phone = document.getElementById('phone').value;
                const date = document.getElementById('date').value;
                const time = document.getElementById('time').value;
                const persons = document.getElementById('persons').value;
                const occasion = document.getElementById('occasion').value;
                const specialRequests = document.getElementById('specialRequests').value;

                console.log('Form data:', { firstName, lastName, email, phone, date, time, persons, occasion }); // Debug

                // Generate random table number (1-20)
                const tableNumber = Math.floor(Math.random() * 20) + 1;
                const formattedDate = formatDate(date);
                const personsText = persons === '9+' ? 'mehr als 8 Personen' : persons + (persons === '1' ? ' Person' : ' Personen');

                // Create personalized messages EXACTLY as requested
                const greeting = `Hallo ${firstName} ${lastName}, vielen Dank für Ihre Reservierung!`;
                const confirmation = `Wir freuen uns sehr diese bestätigen zu können und Sie bei uns am ${formattedDate} um ${time} Uhr begrüßen zu können!`;
                const tableInfo = `Wir haben Ihnen den Tisch ${tableNumber} für ${personsText} zugewiesen.`;
                
                console.log('Generated messages:', { greeting, confirmation, tableInfo }); // Debug
                
                // Create closing message based on occasion
                let closingMessage;
                if (occasion && occasion !== '') {
                    const occasionText = getOccasionText(occasion);
                    closingMessage = `Wir wünschen viel Vergnügen bei Ihrem ${occasionText} und freuen uns sehr Sie bei uns kulinarisch verwöhnen zu dürfen und Ihrem besonderen Anlass zu einem besonderen Erlebnis machen zu dürfen!`;
                } else {
                    closingMessage = `Wir wünschen Ihnen einen angenehmen Aufenthalt bei uns und freuen uns Sie kulinarisch verwöhnen zu können.`;
                }

                console.log('Closing message:', closingMessage); // Debug

                // Update personalized messages - CHECK IF ELEMENTS EXIST
                const greetingEl = document.getElementById('checkoutGreeting');
                const confirmationEl = document.getElementById('checkoutConfirmation');
                const tableInfoEl = document.getElementById('checkoutTableInfo');
                const closingEl = document.getElementById('checkoutClosing');
                
                console.log('Elements found:', {
                    greeting: !!greetingEl,
                    confirmation: !!confirmationEl,
                    tableInfo: !!tableInfoEl,
                    closing: !!closingEl
                }); // Debug
                
                if (greetingEl) greetingEl.textContent = greeting;
                if (confirmationEl) confirmationEl.textContent = confirmation;
                if (tableInfoEl) tableInfoEl.textContent = tableInfo;
                if (closingEl) closingEl.textContent = closingMessage;

                // Update summary (keeping existing functionality)
                const summaryElements = {
                    name: document.getElementById('summaryName'),
                    email: document.getElementById('summaryEmail'),
                    phone: document.getElementById('summaryPhone'),
                    date: document.getElementById('summaryDate'),
                    time: document.getElementById('summaryTime'),
                    persons: document.getElementById('summaryPersons')
                };
                
                console.log('Summary elements found:', Object.keys(summaryElements).map(key => ({ [key]: !!summaryElements[key] }))); // Debug
                
                if (summaryElements.name) summaryElements.name.textContent = `${firstName} ${lastName}`;
                if (summaryElements.email) summaryElements.email.textContent = email;
                if (summaryElements.phone) summaryElements.phone.textContent = phone;
                if (summaryElements.date) summaryElements.date.textContent = formattedDate;
                if (summaryElements.time) summaryElements.time.textContent = time + ' Uhr';
                if (summaryElements.persons) summaryElements.persons.textContent = persons === '9+' ? 'Mehr als 8 Personen' : persons + (persons === '1' ? ' Person' : ' Personen');

                // Update optional fields
                const occasionRow = document.getElementById('summaryOccasionRow');
                const occasionValue = document.getElementById('summaryOccasion');
                if (occasion && occasionRow && occasionValue) {
                    occasionRow.style.display = 'flex';
                    occasionValue.textContent = getOccasionText(occasion);
                } else if (occasionRow) {
                    occasionRow.style.display = 'none';
                }
                
                const requestsRow = document.getElementById('summaryRequestsRow');
                const requestsValue = document.getElementById('summaryRequests');
                if (specialRequests && requestsRow && requestsValue) {
                    requestsRow.style.display = 'flex';
                    requestsValue.textContent = specialRequests;
                } else if (requestsRow) {
                    requestsRow.style.display = 'none';
                }

                // Generate table assignment for display card
                const tableAssignment = generateTableAssignment(parseInt(persons), tableNumber);
                const tableNumberEl = document.getElementById('tableNumber');
                const tableLocationEl = document.getElementById('tableLocation');
                
                if (tableNumberEl) tableNumberEl.textContent = tableAssignment.number;
                if (tableLocationEl) tableLocationEl.textContent = tableAssignment.location;
                
                // Update table features
                const featuresList = document.getElementById('tableFeatures');
                if (featuresList) {
                    featuresList.innerHTML = '';
                    tableAssignment.features.forEach(feature => {
                        const li = document.createElement('li');
                        li.textContent = feature;
                        featuresList.appendChild(li);
                    });
                }

                // Update confirmation email
                const confirmEmailEl = document.getElementById('confirmEmail');
                if (confirmEmailEl) confirmEmailEl.textContent = email;

                // Scroll to checkout
                document.getElementById('checkoutSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                console.log('Checkout setup complete'); // Debug
            }

            // Function to generate table assignment
            function generateTableAssignment(personCount, tableNumber) {
                const occasion = document.getElementById('occasion').value;
                
                // Special tables based on group size and occasion
                if (personCount >= 8) {
                    return {
                        number: `Tisch ${tableNumber}`,
                        location: 'im privaten Salon',
                        features: [
                            'Exklusiver Privatbereich für Ihre Gruppe',
                            'Eigener Service-Mitarbeiter',
                            'Maßgeschneiderte Menü-Optionen',
                            'Separate Garderobe und Bar'
                        ]
                    };
                } else if (personCount >= 6) {
                    return {
                        number: `Tisch ${tableNumber}`,
                        location: 'im Familiensalon',
                        features: [
                            'Großzügiger runder Tisch',
                            'Gemütliche Familienatmosphäre',
                            'Kinderstühle verfügbar',
                            'Ruhige Ecke des Restaurants'
                        ]
                    };
                }
                
                // Table features based on table number ranges
                let tableFeatures = [];
                let tableLocation = '';
                
                if (tableNumber >= 1 && tableNumber <= 5) {
                    tableLocation = 'am Fenster';
                    tableFeatures = ['Wunderschöner Straßenblick', 'Natürliches Licht', 'People-Watching'];
                } else if (tableNumber >= 6 && tableNumber <= 10) {
                    tableLocation = 'mit Gartenblick';
                    tableFeatures = ['Direkter Blick in den grünen Innenhof', 'Entspannte Atmosphäre', 'Vogelgezwitscher'];
                } else if (tableNumber >= 11 && tableNumber <= 15) {
                    tableLocation = 'am Kamin';
                    tableFeatures = ['Romantische Kamin-Atmosphäre', 'Gedämpftes Kerzenlicht', 'Gemütliche Wärme'];
                } else {
                    tableLocation = 'zentral gelegen';
                    tableFeatures = ['Mittendrin im Geschehen', 'Lebendige Atmosphäre', 'Klassisches Restaurant-Feeling'];
                }
                
                // Add special features based on occasion
                if (occasion === 'date' || occasion === 'anniversary') {
                    tableFeatures.push('Besonders romantische Dekoration');
                    tableFeatures.push('Champagner-Service verfügbar');
                } else if (occasion === 'business') {
                    tableFeatures.push('Ruhiger Bereich für Gespräche');
                    tableFeatures.push('Diskrete Atmosphäre');
                } else if (occasion === 'birthday') {
                    tableFeatures.push('Geburtstags-Dekoration möglich');
                    tableFeatures.push('Besondere Dessert-Überraschung');
                }
                
                return {
                    number: `Tisch ${tableNumber}`,
                    location: tableLocation,
                    features: tableFeatures
                };
            }

            // Function to format date
            function formatDate(dateString) {
                const date = new Date(dateString);
                const weekdays = ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'];
                const months = ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'];
                
                return `${weekdays[date.getDay()]}, ${date.getDate()}. ${months[date.getMonth()]} ${date.getFullYear()}`;
            }

            // Function to get occasion text
            function getOccasionText(occasion) {
                const occasions = {
                    'birthday': 'Geburtstag',
                    'anniversary': 'Jubiläum',
                    'business': 'Geschäftsessen',
                    'date': 'Romantisches Dinner',
                    'celebration': 'Feier',
                    'other': 'Sonstiges'
                };
                return occasions[occasion] || occasion;
            }
        });
    </script>
</body>
</html>